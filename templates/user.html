{% extends "layout.html" %}
{% if session.username %}
{% block title %}{{ user.username }}{% endblock %}
{% block page_content %}

{% if user.rights_to_modify %}
<div class="row">
    <div class="col">
        <div class="container mt-2 ml-2 p-3 shadow" style="background-color: antiquewhite;">
            <h5 class="text-center">käyttäjätiedot</h5>
            <hr>
            <p>käyttäjänimi: <b>{{ user.username }}</b></p>
            {% if not friend and session.user_id != user.id %}
                <a href={{ url_for("add_friend", id=user.id)}}>lisää ystäväksi</a>
            {% endif %}
        </div>

                <div class="container mt-2 ml-2 p-3 shadow" style="background-color:aliceblue; max-height: 600px; overflow-y: scroll;">
                <h5 class="text-center">Selaa käyttäjiä</h5>
                <hr>
                <ul>
                {% for u in all_users %}
                    <li style="margin: 5px;">
                        <a href={{ url_for("user", id=u.id)}}>{{ u.username }}</a>
                        {% if u.is_friend %}<span>(ystävä)</span>{% endif %} <br>
                    </li>            
                {% endfor %}
                </ul>
                </div>

    </div>
    <div class="col">
        <div class="container mt-2 ml-2 p-3 shadow" style="background-color:rgb(255, 220, 220); max-height: 300px; overflow-y: scroll;">
            <h5 class="text-center">ystävät</h5>
            <hr>
            <ul>
                {% for friend in user.friends %}
                <li style="margin: 5px;">
                    <a href={{ url_for("user", id=friend.id)}}>{{ friend.username }}</a><br>
                </li>
                {% endfor %}
                </ul>
            <hr>
            <h5 class="text-center">ystäväkutsut</h5>
            <hr>
            {% for invitation in user.friend_invitations %}
            <a href={{ url_for("user", id=invitation.id)}}>{{ invitation.username }}</a>               
            {% endfor %}
        </div>
    </div>
</div>
{% else %}
<div class="row">
    <div class="col">
        <div class="container mt-2 ml-2 p-3 shadow" style="background-color: antiquewhite;">
            <h5 class="text-center">käyttäjätiedot</h5>
            <hr>
            <p>käyttäjänimi: <b>{{ user.username }}</b></p>
            {% if not friend %}
                <a href={{ url_for("add_friend", id=user.id)}}>lisää ystäväksi</a>
            {% endif %}
        </div>

        <div class="container mt-2 ml-2 p-3 shadow" style="background-color:aliceblue; max-height: 600px; overflow-y: scroll;">
            <h5 class="text-center">Selaa käyttäjiä</h5>
            <hr>
            <ul>
            {% for u in all_users %}
                <li style="margin: 5px;">
                    <a href={{ url_for("user", id=u.id)}}>{{ u.username }}</a>
                    {% if u.is_friend %}<span>(ystävä)</span>{% endif %} <br>
                </li>            
            {% endfor %}
            </ul>
            </div>

    </div>
    <div class="col">
        <div class="container mt-2 ml-2 p-3 shadow" style="background-color:rgb(255, 220, 220); max-height: 300px; overflow-y: scroll;">
            <h5 class="text-center">ystävät</h5>
            <hr>
            <ul>
            {% for friend in user.friends %}
            <li style="margin: 5px;">
                <a href={{ url_for("user", id=friend.id)}}>{{ friend.username }}</a><br>
            </li>
            {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}
{% endif %}